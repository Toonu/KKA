
//Accuracy fix
@ROCKET[8KOMS]:NEEDS[SMA] {
	@thrustDeviation = 0.015
}

//Radars, descriptions and overall update to new BDA standards.

@PART[M163VADS]:NEEDS[SMA] {
    @MODULE[ModuleRadar] {
		@directionalFieldOfView = 35
		@scanRotationSpeed = 40
		@canScan = false
		-radarDetectionCurve {}
		-radarLockTrackCurve {}
	
	 	radarLockTrackCurve {
            key = 0 0 0 1.191601
            key = 4 10 6.903669 6.989554
            key = 5 20 10.53343 11.25173
        } 
    }
}
@PART[ShilkaZSU234turret]:NEEDS[SMA] {
	@title = ZSU-23-4 Shilka
	@description = ZSU-23-4 "Shilka" four 23 mm autocannons, radar guided Anti-aircraft gun, also effective at destroying light ground targets and parts of larger vehicles. It uses 1RL33 (RPK-2 "Tobol") Radar.
    @MODULE[ModuleRadar] {
		@radarName = 1RL33 (RPK-2 "Tobol") Radar
		@directionalFieldOfView = 60
		@scanRotationSpeed = 20
		-radarDetectionCurve {}
		-radarLockTrackCurve {}
		
	    radarDetectionCurve {
            key = 0 0 0 1.191601
            key = 9 10 1.51575 1.561383
            key = 16 20 1.525667 2.503766
        } 
	
	 	radarLockTrackCurve {
            key = 0 0 0 2.961521
            key = 3 10 4.145666 4.73561
            key = 5 20 4.423522 2.503766
        } 
    }
}

//Title and description fixes.

@PART[ShilkaZSUHull]:NEEDS[SMA] {
	@title = ZSU-23-4 Shilka Hull
	@description = ZSU-23-4 "Shilka" vehicle hull.
}
@PART[Humvee]:NEEDS[SMA] {
	-MODULE[ModuleRadar] {}
}
@PART[SMTunguskaAAMT]:NEEDS[SMA] {
	@title = 2K22 Tunguska
	@description = KBP 2K22 "Tunguska" (SA-19) "Grison" is a Russian tracked self-propelled anti-aircraft weapon armed with a surface-to-air gun and missile system. It is designed to provide day and night protection for infantry and tank regiments against low-flying aircraft, helicopters, and cruise missiles in all weather conditions.
}
@PART[SMA57E6BGM]:NEEDS[SMA] {
	@title = 57E6 Pantsir
	@description = KBP 57E6 "Pantsir" (SA-22) "Greyhound" is two-stage solid fuel radio/optical command-guided surface-to-air missile in service from 2012 in Russian Federation Armed Forces.
}
@PART[AtakaAT]:NEEDS[SMA] {
	@title = 9M120 Ataka
	@description = KBM 9M120 "Ataka" (AT-9) "Spiral-2" is a Beam riding SACLOS missile designed to defeat tanks with composite armour and explosive reactive armor.
}
@PART[T90MS]:NEEDS[SMA] {
	@title = T-90AM
	@description = T-90AM is a Russian Federation main battle tank equipped with 125mm 2A46M-5 smoothbore gun.
}
@PART[SMsT80Turret]:NEEDS[SMA] {
	@title = T-80B
	@description = T-90B is a Russian Federation main battle tank equipped with 125mm 2A46-2 smoothbore gun.
}
@PART[KUB2K12]:NEEDS[SMA] {
	@title = 2K12 Kub Hull
	@description = MMZ 2K12 "Kub" (SA-6) "Gainful" mobile surface-to-air missile system is a Soviet low to medium-level air defence system designed to protect ground forces from air attack. Each 2K12 battery consisted of a number of similar tracked vehicles, one of which carries 25 kW G/H band radar. The battery usually also includes four triple-missile transporter erector launchers (TELs), and four trucks, each carrying three spare missiles and a crane.
}
@PART[KUB2K12launcher]:NEEDS[SMA] {
	@title = 2K12 Kub
	@description = MMZ 2K12 "Kub" (SA-6) "Gainful" mobile surface-to-air missile system is a Soviet low to medium-level air defence system designed to protect ground forces from air attack. Each 2K12 battery consisted of a number of similar tracked vehicles, one of which carries 25 kW G/H band radar. The battery usually also includes four triple-missile transporter erector launchers (TELs), and four trucks, each carrying three spare missiles and a crane.
}
@PART[Eland90BHull]:NEEDS[SMA] {
	@title = Eland 90B
}
@PART[Eland90BTurret]:NEEDS[SMA] {
	@title = Eland 90B Hull
}
@PART[BMP75mmTurret]:NEEDS[SMA] {
	@title = BMP-1
	@description = BMP-1 is a Soviet amphibious tracked infantry fighting vehicle with 73 mm 2A28 "Grom" low pressure smoothbore semi-automatic gun usually equipped with ATGMs and full of trained soviet soldiers.
	
	@MODULE[ModuleWeapon] {
		%shortName = BMP 3 75mm
		@bulletType = 76.2MMMHEATFS
	}
}
@PART[M1SMA]:NEEDS[SMA] {
	@title = M1A1 Abrams
	@description = BMP-1 is a Soviet amphibious tracked infantry fighting vehicle with 73 mm 2A28 "Grom" low pressure smoothbore semi-automatic gun usually equipped with ATGMs and full of trained soviet soldiers.
}
@PART[M1SM1Turret]:NEEDS[SMA] {
	@title = M1 Abrams
	@description = BMP-1 is a Soviet amphibious tracked infantry fighting vehicle with 73 mm 2A28 "Grom" low pressure smoothbore semi-automatic gun usually equipped with ATGMs and full of trained soviet soldiers.
}
@PART[S125NevaMissile]:NEEDS[SMA] {
	@title = 5V24/V-600 System 125 TEL
	@description = A turret capable of holding and firing up to 2 missiles. Warranty void if anything except missiles are mounted. To enable the turret, select the mounted missile from the weapon manager.
}

//Complete part overhauls.

@PART[4K40Termit]:NEEDS[SMA] {
	// Kerbal Space Program - Part Config
	// 
	// 

	// --- general parameters ---
	@module = Part
	@author = Spanner
	@rescaleFactor = 1
	-NODE[Node1] {}
	-NODE[Node2] {}
	-NODE[Node3] {}
	
	NODE {
		name = Node1
		transform = Node1
		size = 0
		method = FIXED_JOINT
	}
	NODE {
		name = Node2
		transform = Node2
		size = 0
		method = FIXED_JOINT
	}
	NODE {
		name = Node3
		transform = Node3
		size = 0
		method = FIXED_JOINT
	}
	@buoyancy = 0
	
	// --- editor parameters ---
	@TechRequired = precisionEngineering
	@entryCost = 2100
	@cost = 950
	@category = none
	@subcategory = 0
	@title = 4K40 Termit
	@manufacturer = SM Armory Missiles
	@description = Raduga 4K40/P-15 "Termit" (SS-N-2) "Styx". This anti-shipping missile was deployed by the Russian Navy, 
	
	// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
	@attachRules = 1,1,0,0,1

	// --- standard part parameters ---
	@mass = 2.580
	@dragModelType = default
	@maximum_drag = 0.01
	@minimum_drag = 0.01
	@angularDrag = 2
	@crashTolerance = 30
	@maxTemp = 3600

	-MODULE[MissileLauncher] {}
	MODULE {
		name = MissileLauncher
		shortName = P-15 Termit
		guidanceActive = true
	  
		// --- Targeting ---
		missileType = missile
		homingType = Cruise
		targetingType = radar
		activeRadarRange = 40000
		maxOffBoresight = 180
		lockedSensorFOV = 7
		radarLOAL = true
		
		//Terminal Guidance
		terminalManeuvering = false
		
		// --- Missile specific ---
		CruiseSpeed = 328
		CruisePredictionTime = 15
		CruiseAltitude = 100
		
		// --- Warhead ---
		proxyDetonate = false
		DetonationDistance = 0.1
		
		// --- Propulsion ---
		thrust = 170
		cruiseThrust = 50
		dropTime = 0
		boostTime = 5
		cruiseTime = 300
		cruiseDelay = 0.5
		decoupleSpeed = 10
		decoupleForward = true
		
		// --- Aerodynamics ---
		aero = true
		optimumAirspeed = 328
		liftArea = 0.045
		steerMult = 20
		maxTorque = 150
		maxAoA = 40
		maxTurnRateDPS = 28
		torqueRampUp = 50

		
		// --- Booster & Animation & Sound ---
		decoupleBoosters = true
		boosterMass = 0.3
		boosterDecoupleSpeed = 1
		boostTransformName = BoosterTransform
		rotationTransformName = rotationTransform
		boostExhaustTransformName = boostTransform
		boostExhaustPrefabPath = BDArmory/Models/exhaust/mediumExhaust
		exhaustPrefabPath = BDArmory/Models/exhaust/smallExhaust
		audioClipPath = BDArmory/Sounds/rocketLoop
		boostClipPath = BDArmory/Sounds/rocketLoop
		
		deployAnimationName = TermitAllDeploy
		deployedDrag = 0.02
		deployTime = 3
		
		// --- Engagement Rules --- 
		minStaticLaunchRange = 500
		maxStaticLaunchRange = 40000
		engageAir = false
		engageMissile = false
		engageGround = true
		engageSLW = false
	}

	-MODULE[BDExplosivePart] {}
	MODULE {
		name = BDExplosivePart
		tntMass = 454
	}
}
@PART[S125NevaMissile]:NEEDS[SMA] {
	// Kerbal Space Program - Part Config
	//
	//

	// --- general parameters ---
	@module = Part
	@author = Spanner
	@rescaleFactor = 1

	-NODE[Node1] {}
	-NODE[Node2] {}
	NODE {
		name = Node1
		transform = Node1
		size = 0
		method = FIXED_JOINT //FIXED_JOINT, HINGE_JOINT, LOCKED_JOINT, MERGED_PHYSICS or NO_PHYSICS
	}
	NODE {
		name = Node2
		transform = Node2
		size = 0
		method = FIXED_JOINT //FIXED_JOINT, HINGE_JOINT, LOCKED_JOINT, MERGED_PHYSICS or NO_PHYSICS
	}
	
	// --- editor parameters ---
	@TechRequired = precisionEngineering
	@entryCost = 2100
	@cost = 950
	@category = none
	@bdacategory = Missiles
	@subcategory = 0
	@title = 5V24 Neva
	@manufacturer = SM Armory Missiles
	@description = 5V24 "Neva" (SA-3) "Goa" of the S-125 System is a medium range high speed guided surface to air missile. 
	
	// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
	@attachRules = 1,1,0,0,1
	
	// --- standard part parameters ---
	@mass = 0.953
	@dragModelType = default
	@maximum_drag = 0.01
	@minimum_drag = 0.01
	@angularDrag = 2
	@crashTolerance = 5
	@maxTemp = 3600
	-MODULE[MissileLauncher] {}
	-MODULE[BDExplosivePart] {}
	
	MODULE {
		name = MissileLauncher
		shortName = S125
		guidanceActive = true
		
		// --- Targeting ---
		missileType = missile
		homingType = aam
		targetingType = radar
		activeRadarRange = 8000
		maxOffBoresight = 90
		lockedSensorFOV = 7
		radarLOAL = true
		
		//Terminal Guidance
		
		// --- Missile specific ---
		
		// --- Warhead ---
		proxyDetonate = true
		DetonationDistance = 10
	  
		// --- Propulsion ---
		thrust = 90
		cruiseThrust = 22 
		dropTime = 0
		boostTime = 2.6
		cruiseTime = 18.7
		decoupleSpeed = 5
		decoupleForward = true
		
		// --- Aerodynamics ---
		aero = true
		optimumAirspeed = 775
		liftArea = 0.003
		steerMult = 8
		maxTorque = 80
		maxAoA = 14
		maxTurnRateDPS = 3
		torqueRampUp = 100
	  
		// --- Booster & Animation & Sound ---
		decoupleBoosters = true
		boosterMass = 0.150
		boosterDecoupleSpeed = 7
		boostTransformName = boosterTransform
		rotationTransformName = rotationTransform
		boostExhaustTransformName = boostTransform
		boostExhaustPrefabPath = BDArmory/Models/exhaust/mediumExhaust		
		exhaustPrefabPath = BDArmory/Models/exhaust/smallExhaust
		audioClipPath = BDArmory/Sounds/rocketLoop
		boostClipPath = BDArmory/Sounds/rocketLoop
		
		deployAnimationName = SA3deploy
		deployedDrag = 0.011
		deployTime = 0.35
		
		// --- Engagement Rules --- 
		minStaticLaunchRange = 1000
		maxStaticLaunchRange = 15000
		engageAir = true
		engageMissile = true
		engageGround = false
		engageSLW = false
	}
	MODULE {
		name = BDExplosivePart
		tntMass = 60
	}
}
