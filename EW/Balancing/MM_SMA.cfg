
//Accuracy fix
@ROCKET[8KOMS]:NEEDS[SMA] {
	@thrustDeviation = 0.015
}

//Radars, descriptions and overall update to new BDA standards.

@PART[M163VADS]:NEEDS[SMA] {
    @MODULE[ModuleRadar] {
		@directionalFieldOfView = 35
		@scanRotationSpeed = 40
		@canScan = false
		-radarDetectionCurve {}
		-radarLockTrackCurve {}
	
	 	radarLockTrackCurve {
            key = 0 0 0 1.191601
            key = 4 10 6.903669 6.989554
            key = 5 20 10.53343 11.25173
        } 
    }
}
@PART[ShilkaZSU234turret]:NEEDS[SMA] {
	@title = ZSU-23-4 Shilka
	@description = ZSU-23-4 "Shilka" four 23 mm autocannons, radar guided Anti-aircraft gun, also effective at destroying light ground targets and parts of larger vehicles. It uses 1RL33 (RPK-2 "Tobol") Radar.
    @MODULE[ModuleRadar] {
		@radarName = 1RL33 (RPK-2 "Tobol") Radar
		@directionalFieldOfView = 60
		@scanRotationSpeed = 20
		-radarDetectionCurve {}
		-radarLockTrackCurve {}
		
	    radarDetectionCurve {
            key = 0 0 0 1.191601
            key = 9 10 1.51575 1.561383
            key = 16 20 1.525667 2.503766
        } 
	
	 	radarLockTrackCurve {
            key = 0 0 0 2.961521
            key = 3 10 4.145666 4.73561
            key = 5 20 4.423522 2.503766
        } 
    }
}

//Title and description fixes.


@PART[533Quadtubes]:NEEDS[SMA] {
	@title = 533mm Quad Torpedo Tube
}
@PART[AAV7A1]:NEEDS[SMA] {
	@title = AAVP-7A1
	@description = The Assault Amphibious Vehicle is a fully tracked amphibious landing vehicle manufactured by U.S. Combat Systems.
}
@PART[AAV7turret20]:NEEDS[SMA] {
	@title = AAVP-7A1
	@description = AAVP-7A1 20mm turreted machine gun, yeah i know, your eye is twitching, i know it shouldn't be a 20, but really we all know a .50's a waste of time on anything except kerbs and coke cans.
}
@PART[AAVrightArmor]:NEEDS[SMA] {
	@title = AAVP-7A1 Right Armor
}
@PART[AAVleftArmor]:NEEDS[SMA] {
	@title = AAVP-7A1 Left Armor
}
@PART[AAVfwdArmor]:NEEDS[SMA] {
	@title = AAVP-7A1 Frontal Armor
}
@PART[AK100a18]:NEEDS[SMA] {
	@title = AK-100
	@description = The AK-100 is a Soviet 100mm naval cannon, with a maximum rate of fire of 60 rounds per minute, firing a 26.8 kg munition in HE anti-air or HE fragmentation varieties. Equipped on patrol ships of project 1135, project 1154, anti-submarine ships of project 1155, nuclear cruiser Admiral Ushakov and Admiral Gorshkov-class frigate.
}
@PART[AK130turret]:NEEDS[SMA] {
	@title = AK-130
	@description = The AK-130 Russian-built 130mm naval cannon is one of the most powerful gun systems used in the world today, with a maximum rate of fire of 80 rounds per minute, firing a 33 kg munition in HE anti-air or HE fragmentation varieties.
}
@PART[AK230]:NEEDS[SMA] {
	@title = AK-230
	@description = The AK-230 is a Soviet fully automatic naval twin 30 mm gun. Its primary function is anti-aircraft. It is mounted in an enclosed automatic turret and directed by radar. AK-230 is widely used on big warships as well as small craft. About 1450 guns were produced in the USSR, and about 300 were produced in China as the Type 69. It was succeeded by the more powerful AK-630 from the mid-to-late 1970s.
}
@PART[AK639QB1]:NEEDS[SMA] {
	@title = AK-630
	@description = The AK-630 is a Soviet and Russian fully automatic naval close-in weapon system based on a six-barreled 30 mm rotary cannon. In "630", "6" means 6 barrels and "30" means 30 mm. The system's primary purpose is defense against anti-ship missiles and other precision guided weapons. However it can also be employed against fixed or rotary wing aircraft, ships and other small craft, coastal targets, and floating mines.
}
@PART[AK230LowPlinth]:NEEDS[SMA] {
	@title = AK-230/630 Low Plinth
}
@PART[AK230tallPlinth]:NEEDS[SMA] {
	@title = AK-230/630 Tall Plinth
}
@PART[APC30Cg2A42]:NEEDS[SMA] {
	@title = 2A42
	@description = Shipunov 2A42 is a Soviet/Russian 30 mm autocannon used on BMP-2, BMP-3, BMD as well as BTR series of APCs and Attack Helicopters.
}
@PART[BMP75mmTurret]:NEEDS[SMA] {
	@title = BMP-1
	@description = BMP-1 is a Soviet amphibious tracked infantry fighting vehicle with 73 mm 2A28 "Grom" low pressure smoothbore semi-automatic gun usually equipped with ATGMs and full of trained soviet soldiers.
	
	@MODULE[ModuleWeapon] {
		%shortName = BMP 3 75mm
		@bulletType = 76.2MMMHEATFS
	}
}
@PART[BradleyActive]:NEEDS[SMA] {
	@title = M2 Bradley
	@description = The M2 Bradley is an American infantry fighting vehicle that is a member of the Bradley Fighting Vehicle family. It is manufactured by BAE Systems Land & Armaments, which was formerly United Defense. The Bradley is designed for reconnaissance and to transport a squad of infantry, providing them protection from small arms fire, while also providing firepower to both suppress and eliminate most threats to friendly infantry. This turret uses, as per specification, BDA BGM-71 Tow Missile. Use of other missiles automatically invalidates your warranty. Use of other missiles may also result in R.U.D and possibly a scratch or bruise, maybe two. Please observe the safety instructions on the missile in the latest low observability microfont weight saving ink.
}
@PART[BradleyHull]:NEEDS[SMA] {
	@title = M2 Bradley
}
@PART[BradleyRightArmorUpper]:NEEDS[SMA] {
	@title = M2 Bradley Armor Right
}
@PART[BradleyLeftArmorUpper]:NEEDS[SMA] {
	@title = M2 Bradley Armor Left
}
@PART[BradleyRightArmorLower]:NEEDS[SMA] {
	@title = M2 Bradley Armor Right
}
@PART[BradleyLeftArmorLower]:NEEDS[SMA] {
	@title = M2 Bradley Armor Left
}
@PART[Eland90BHull]:NEEDS[SMA] {
	@title = Eland 90B
}
@PART[Eland90BTurret]:NEEDS[SMA] {
	@title = Eland 90B
}
@PART[FV510Hull]:NEEDS[SMA] {
	@title = FV 510 Warrior
	@description = The Warrior tracked vehicle family is a series of British armoured vehicles, originally developed to replace the older FV430 series of armoured vehicles. Warrior was accepted for service with the British Army in November 1984.
}
@PART[FV510Turret]:NEEDS[SMA] {
	@title = FV 510 Warrior
	@description = The Warrior tracked vehicle family is a series of British armoured vehicles featuring a 30 mm L21A1 RARDEN cannon, originally developed to replace the older FV430 series of armoured vehicles. Warrior was accepted for service with the British Army in November 1984.
}
@PART[Humvee]:NEEDS[SMA] {
	@title = HMMWV
}
@PART[mk19Turret]:NEEDS[SMA] {
	@title = Mk. 19 Grenade launcher
    @description = The Mk 19 grenade launcher is an American 40 mm belt-fed automatic grenade launcher that was first developed during the Vietnam War.
}
@PART[HVUA30CG]:NEEDS[SMA] {
	@title = M240E1 GPMG
    @description = The M240, officially the Machine Gun, 7.62 mm, M240, is the U.S. military designation for the FN MAG belt-fed, gas-operated medium machine guns. The M240 has been used extensively by infantry, most often in rifle companies, as well as on ground vehicles, watercraft and aircraft.
}
@PART[KUB2K12]:NEEDS[SMA] {
	@title = 2K12 Kub Hull
	@description = MMZ 2K12 "Kub" (SA-6) "Gainful" mobile surface-to-air missile system is a Soviet low to medium-level air defence system designed to protect ground forces from air attack. Each 2K12 battery consisted of a number of similar tracked vehicles, one of which carries 25 kW G/H band radar. The battery usually also includes four triple-missile transporter erector launchers (TELs), and four trucks, each carrying three spare missiles and a crane.
}
@PART[KUB2K12launcher]:NEEDS[SMA] {
	@title = 2K12 Kub
	@description = MMZ 2K12 "Kub" (SA-6) "Gainful" mobile surface-to-air missile system is a Soviet low to medium-level air defence system designed to protect ground forces from air attack. Each 2K12 battery consisted of a number of similar tracked vehicles, one of which carries 25 kW G/H band radar. The battery usually also includes four triple-missile transporter erector launchers (TELs), and four trucks, each carrying three spare missiles and a crane.
}
@PART[Leopard2A6]:NEEDS[SMA] {
	@title = Leopard 2A6
    @description = The Leopard 2A6 introduced in 2007 includes the addition of the Rheinmetall 120 mm L/55 smoothbore gun and other changes.
}
@PART[M1SMA]:NEEDS[SMA] {
	@title = M1A1 Abrams
	@description = The M1 Abrams is a third-generation American main battle tank designed by Chrysler Defense. M1A1 production started in 1985 and continued to 1992. It featured a new pressurized NBC system, rear bustle rack for improved stowage of supplies and crew belongings, redesigned blow-off panels and M256 120 mm smoothbore cannon.
}
//ADD CASE explosions to the turrets!!!
@PART[M1SM1Turret]:NEEDS[SMA] {
	@title = M1 Abrams
	@description = The M1 Abrams is a third-generation American main battle tank designed by Chrysler Defense. M1A1 production started in 1985 and continued to 1992. M1 was the first production variant. Production began in 1979 and continued to 1985. It featured 105 mm L/52 M68A1 rifled gun with 55 shells.
}
@PART[M113Hull]:NEEDS[SMA] {
	@title = M113 APC
	@description = The M113 is a fully tracked armored personnel carrier that was developed and produced by the Food Machinery and Chemical Corporation. It was largely known as an "APC" or an "ACAV" (armored cavalry assault vehicle) by the allied forces.
}
//TODO check what gun it is actually
@PART[M113GunTurret]:NEEDS[SMA] {
	@title = M113 APC Gun
	@description = The M113 is a fully tracked armored personnel carrier that was developed and produced by the Food Machinery and Chemical Corporation. It was largely known as an "APC" or an "ACAV" (armored cavalry assault vehicle) by the allied forces.
}
@PART[M163VADS]:NEEDS[SMA] {}
@PART[AFVFlareCM]:NEEDS[SMA] {
    @title = Flare dispenser.
}
//Add smoke dispenser
@PART[MissileErektor]:NEEDS[SMA] {
    @title = 9P117 Strategic Missile Launcher.
    @description = A 9P117 system used on the MAZ-543 "Uragan" launch vehicle for standing up and firing large ballastic style missiles.

}
//Find what shape the Scud has to determine version
@PART[SkudD]:NEEDS[SMA] {
    @title = 8A61 Zemlya
    @description = The OKB-1 8A61/R-11 "Zemlya" (SS-1B) "Scud" was a Soviet tactical ballistic missile. It was the first of several similar Soviet missiles to be given the reporting name Scud.
}
@PART[MK141GMLS]:NEEDS[SMA] {
    @title = Mk. 141 GMLS

    @description = The OKB-1 8A61/R-11 "Zemlya" (SS-1B) "Scud" was a Soviet tactical ballistic missile. It was the first of several similar Soviet missiles to be given the reporting name Scud.
}


@PART[ShilkaZSUHull]:NEEDS[SMA] {
	@title = ZSU-23-4 Shilka Hull
	@description = ZSU-23-4 "Shilka" vehicle hull.
}
@PART[Humvee]:NEEDS[SMA] {
	-MODULE[ModuleRadar] {}
}
@PART[SMTunguskaAAMT]:NEEDS[SMA] {
	@title = 2K22 Tunguska
	@description = KBP 2K22 "Tunguska" (SA-19) "Grison" is a Russian tracked self-propelled anti-aircraft weapon armed with a surface-to-air gun and missile system. It is designed to provide day and night protection for infantry and tank regiments against low-flying aircraft, helicopters, and cruise missiles in all weather conditions.
}
@PART[SMA57E6BGM]:NEEDS[SMA] {
	@title = 57E6 Pantsir
	@description = KBP 57E6 "Pantsir" (SA-22) "Greyhound" is two-stage solid fuel radio/optical command-guided surface-to-air missile in service from 2012 in Russian Federation Armed Forces.
}
@PART[AtakaAT]:NEEDS[SMA] {
	@title = 9M120 Ataka
	@description = KBM 9M120 "Ataka" (AT-9) "Spiral-2" is a Beam riding SACLOS missile designed to defeat tanks with composite armour and explosive reactive armor.
}
@PART[T90MS]:NEEDS[SMA] {
	@title = T-90AM
	@description = T-90AM is a Russian Federation main battle tank equipped with 125mm 2A46M-5 smoothbore gun.
}
@PART[SMsT80Turret]:NEEDS[SMA] {
	@title = T-80B
	@description = T-90B is a Russian Federation main battle tank equipped with 125mm 2A46-2 smoothbore gun.
}



@PART[S125Launcher]:NEEDS[SMA] {
	@title = 5V24/V-600 System 125 TEL
	@description = A turret capable of holding and firing up to 2 missiles. Warranty void if anything except missiles are mounted. To enable the turret, select the mounted missile from the weapon manager.
}


//Complete part overhauls.

@PART[4K40Termit]:NEEDS[SMA] {
	// Kerbal Space Program - Part Config
	// 
	// 

	// --- general parameters ---
	@module = Part
	@author = Spanner
	@rescaleFactor = 1
	-NODE[Node1] {}
	-NODE[Node2] {}
	-NODE[Node3] {}
	
	NODE {
		name = Node1
		transform = Node1
		size = 0
		method = FIXED_JOINT
	}
	NODE {
		name = Node2
		transform = Node2
		size = 0
		method = FIXED_JOINT
	}
	NODE {
		name = Node3
		transform = Node3
		size = 0
		method = FIXED_JOINT
	}
	@buoyancy = 0
	
	// --- editor parameters ---
	@TechRequired = precisionEngineering
	@entryCost = 2100
	@cost = 950
	@category = none
	@subcategory = 0
	@title = 4K40 Termit
	@manufacturer = SM Armory Missiles
	@description = Raduga 4K40/P-15 "Termit" (SS-N-2) "Styx". This anti-shipping missile was deployed by the Russian Navy.
	
	// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
	@attachRules = 1,1,0,0,1

	// --- standard part parameters ---
	@mass = 2.580
	@dragModelType = default
	@maximum_drag = 0.01
	@minimum_drag = 0.01
	@angularDrag = 2
	@crashTolerance = 30
	@maxTemp = 3600

	-MODULE[MissileLauncher] {}
	-MODULE[BDExplosivePart] {}
	MODULE {
	MODULE {
		name = MissileLauncher
		shortName = P-15 Termit
		guidanceActive = true
	  
		// --- Targeting ---
		missileType = missile
		homingType = Cruise
		targetingType = radar
		activeRadarRange = 40000
		maxOffBoresight = 180
		lockedSensorFOV = 7
		radarLOAL = true
		
		//Terminal Guidance
		terminalManeuvering = false
		
		// --- Missile specific ---
		CruiseSpeed = 328
		CruisePredictionTime = 15
		CruiseAltitude = 100
		
		// --- Warhead ---
		proxyDetonate = false
		DetonationDistance = 0.1
		
		// --- Propulsion ---
		thrust = 170
		cruiseThrust = 50
		dropTime = 0
		boostTime = 5
		cruiseTime = 300
		cruiseDelay = 0.5
		decoupleSpeed = 10
		decoupleForward = true
		
		// --- Aerodynamics ---
		aero = true
		optimumAirspeed = 328
		liftArea = 0.045
		steerMult = 20
		maxTorque = 150
		maxAoA = 40
		maxTurnRateDPS = 28
		torqueRampUp = 50

		
		// --- Booster & Animation & Sound ---
		decoupleBoosters = true
		boosterMass = 0.3
		boosterDecoupleSpeed = 1
		boostTransformName = BoosterTransform
		rotationTransformName = rotationTransform
		boostExhaustTransformName = boostTransform
		boostExhaustPrefabPath = BDArmory/Models/exhaust/mediumExhaust
		exhaustPrefabPath = BDArmory/Models/exhaust/smallExhaust
		audioClipPath = BDArmory/Sounds/rocketLoop
		boostClipPath = BDArmory/Sounds/rocketLoop
		
		deployAnimationName = TermitAllDeploy
		deployedDrag = 0.02
		deployTime = 3
		
		// --- Engagement Rules --- 
		minStaticLaunchRange = 500
		maxStaticLaunchRange = 40000
		engageAir = false
		engageMissile = false
		engageGround = true
		engageSLW = false
	}
		name = BDExplosivePart
		tntMass = 454
	}
}
@PART[S125NevaMissile]:NEEDS[SMA] {
	// Kerbal Space Program - Part Config
	//
	//

	// --- general parameters ---
	@module = Part
	@author = Spanner
	@rescaleFactor = 1

	-NODE[Node1] {}
	-NODE[Node2] {}
	NODE {
		name = Node1
		transform = Node1
		size = 0
		method = FIXED_JOINT //FIXED_JOINT, HINGE_JOINT, LOCKED_JOINT, MERGED_PHYSICS or NO_PHYSICS
	}
	NODE {
		name = Node2
		transform = Node2
		size = 0
		method = FIXED_JOINT //FIXED_JOINT, HINGE_JOINT, LOCKED_JOINT, MERGED_PHYSICS or NO_PHYSICS
	}
	
	// --- editor parameters ---
	@TechRequired = precisionEngineering
	@entryCost = 2100
	@cost = 950
	@category = none
	@bdacategory = Missiles
	@subcategory = 0
	@title = 5V24 Neva
	@manufacturer = SM Armory Missiles
	@description = 5V24 "Neva" (SA-3) "Goa" of the S-125 System is a medium range high speed guided surface to air missile. 
	
	// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
	@attachRules = 1,1,0,0,1
	
	// --- standard part parameters ---
	@mass = 0.953
	@dragModelType = default
	@maximum_drag = 0.01
	@minimum_drag = 0.01
	@angularDrag = 2
	@crashTolerance = 5
	@maxTemp = 3600
	-MODULE[MissileLauncher] {}
	-MODULE[BDExplosivePart] {}
	
	MODULE {
		name = MissileLauncher
		shortName = S125
		guidanceActive = true
		
		// --- Targeting ---
		missileType = missile
		homingType = aam
		targetingType = radar
		activeRadarRange = 8000
		maxOffBoresight = 90
		lockedSensorFOV = 7
		radarLOAL = true
		
		//Terminal Guidance
		
		// --- Missile specific ---
		
		// --- Warhead ---
		proxyDetonate = true
		DetonationDistance = 10
	  
		// --- Propulsion ---
		thrust = 90
		cruiseThrust = 22 
		dropTime = 0
		boostTime = 2.6
		cruiseTime = 18.7
		decoupleSpeed = 5
		decoupleForward = true
		
		// --- Aerodynamics ---
		aero = true
		optimumAirspeed = 775
		liftArea = 0.003
		steerMult = 8
		maxTorque = 80
		maxAoA = 14
		maxTurnRateDPS = 3
		torqueRampUp = 100
	  
		// --- Booster & Animation & Sound ---
		decoupleBoosters = true
		boosterMass = 0.150
		boosterDecoupleSpeed = 7
		boostTransformName = boosterTransform
		rotationTransformName = rotationTransform
		boostExhaustTransformName = boostTransform
		boostExhaustPrefabPath = BDArmory/Models/exhaust/mediumExhaust		
		exhaustPrefabPath = BDArmory/Models/exhaust/smallExhaust
		audioClipPath = BDArmory/Sounds/rocketLoop
		boostClipPath = BDArmory/Sounds/rocketLoop
		
		deployAnimationName = SA3deploy
		deployedDrag = 0.011
		deployTime = 0.35
		
		// --- Engagement Rules --- 
		minStaticLaunchRange = 1000
		maxStaticLaunchRange = 15000
		engageAir = true
		engageMissile = true
		engageGround = false
		engageSLW = false
	}
	MODULE {
		name = BDExplosivePart
		tntMass = 60
	}
}
